<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>第2章 さぁはじめましょう</title>
    <link rel="stylesheet" href="style.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="start" href="index.html" title="PHPSpec リファレンスマニュアル" />
    <link rel="up" href="index.html" title="PHPSpec リファレンスマニュアル" />
    <link rel="prev" href="installing.phpspec.html" title="第1章 PHPSpec のインストール" />
    <link rel="next" href="introduction.html" title="第3章 導入" />
    <link rel="preface" href="preface.html" title="序文" />
    <link rel="chapter" href="installing.phpspec.html" title="第1章 PHPSpec のインストール" />
    <link rel="chapter" href="getting.started.html" title="第2章 さぁはじめましょう" />
    <link rel="chapter" href="introduction.html" title="第3章 導入" />
    <link rel="chapter" href="phpspecs.goals.html" title="第4章 PHPSpec の目標" />
    <link rel="chapter" href="writing.specs.with.phpspec.html" title="第5章 PHPSpec でのスペックの記述" />
    <link rel="chapter" href="execution.methods.for.phpspec.html" title="第6章 PHPSpec の実行方法" />
    <link rel="appendix" href="copyrights.html" title="付録 A. 著作権について" />
    <link rel="index" href="the.index.html" title="目次" />
    <link rel="section" href="getting.started.html#phpspec.getting.started" title="2.1. さぁはじめましょう" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">第2章 さぁはじめましょう</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="installing.phpspec.html">前のページ</a> </td>
          <th width="60%" align="center"> </th>
          <td width="20%" align="right"> <a accesskey="n" href="introduction.html">次のページ</a></td>
        </tr>
      </table>
    </div>
    <div class="chapter" lang="ja" xml:lang="ja">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a id="getting.started"></a>第2章 さぁはじめましょう</h2>
          </div>
        </div>
      </div>
      <div class="toc">
        <p>
          <b>目次</b>
        </p>
        <dl>
          <dt>
            <span class="section">
              <a href="getting.started.html#phpspec.getting.started">2.1. さぁはじめましょう</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="getting.started.html#what.is.phpspec">2.1.1. PHPSpec とは?</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="getting.started.html#you.start.by.writing.a.specification">2.1.2. まずはスペックを書くことから</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="getting.started.html#take.very.small.steps">2.1.3. 一歩ずつ着実に</a>
                </span>
              </dt>
            </dl>
          </dd>
        </dl>
      </div>
      <div class="section" lang="ja" xml:lang="ja">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="phpspec.getting.started"></a>2.1. さぁはじめましょう</h2>
            </div>
          </div>
        </div>
        <p>
    PHPSpec は、PHP のコードの振る舞いを記述することに特化した
    ドメイン特化言語を提供するフレームワークです。
    可読性が高く実行可能なコードを用いて、
    設計段階だけでなくドキュメント作成やテストなどの手助けもしてくれます。
  </p>
        <div class="section" lang="ja" xml:lang="ja">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="what.is.phpspec"></a>2.1.1. PHPSpec とは?</h3>
              </div>
            </div>
          </div>
          <p>
      PHPSpec はシンプルなフレームワークです。
      公式な説明によると、繰り返し実行できるサンプルを書くことができるということです。
      つまり、一度書いたサンプルを必要に応じて何度でも繰り返し、
      対応する実装がそのサンプルに合致するかどうかを確認できるということです。
      PHPSpec はユニットテストの一種ですが、振舞駆動開発 (BDD) の流儀では
      ごく一般的な英語風の API を使用することになっています。
      このように、自然言語に近い形式で流れるように書ける API のことを
      ドメイン特化言語 (Domain Specific Language: DSL)<a id="id2345418" class="indexterm"></a> と言います。
      PHPSpec は、完全に BDD を念頭において設計されています。
      ユニットテスト<a id="id566179" class="indexterm"></a> と似てはいますが、このフレームワークははじめから
      BDD をサポートするように作られています。
      これを使用すると、BDD を身につけて実践するのが簡単になります。
    </p>
        </div>
        <div class="section" lang="ja" xml:lang="ja">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="you.start.by.writing.a.specification"></a>2.1.2. まずはスペックを書くことから</h3>
              </div>
            </div>
          </div>
          <p>
      振舞駆動開発を身につけるにあたって、まず最初に行うのはスペック (仕様) を書くことです。
    </p>
          <p>
      スペックとは、特定の状況にあわせたサンプルを集めたもののことです。
      ボウリングを例にして考えてみましょう。
      まずはゲームを開始するところから始まります。
      ということは、一番最初の状態とはゲームを開始する前の状態ということです。
      個々のサンプルは、振る舞いの一面を説明するものとなります。
      たとえばボウリングゲームでは、スコアに関するルールがあります。
      そこで、ピンを何本倒せばスコアがいくつになるかということを表すサンプルを書けば、
      その振る舞いをうまくとらえることができるでしょう。
    </p>
          <p>
      まずはじめに簡単なサンプルを書いてみましょう。
      このサンプルは、ボウリングゲームをはじめるにあたって守らなければならない決まりの一部を表すものです。
    </p>
          <pre class="programlisting">class DescribeNewBowlingGame extends PHPSpec_Context
{

    private $_bowling = null;

    public function before()
    {
        $this-&gt;_bowling = new Bowling;
    }

    public function itShouldScore0ForGutterGame() //「全部ガターなら、スコアはゼロでなければならない」
    {
        for ($i=1; $i&lt;=20; $i++) {
            $this-&gt;_bowling-&gt;hit(0); // ボウリングがめちゃめちゃ下手な人だったのでしょう!
        }
        $this-&gt;spec($this-&gt;_bowling-&gt;score)-&gt;should-&gt;equal(0);
    }

}</pre>
          <p>
      このサンプルを実行するには、まずこのクラスを
      <code class="classname">DescribeNewBowlingGame.php</code> という名前で保存し、
      その場所に移動して、コマンドラインから次のように
      <code class="classname">phpspec</code> コマンドを実行します。
    </p>
          <div class="note">
            <table border="0" summary="Note">
              <tr>
                <td rowspan="2" align="center" valign="top" width="25">
                  <img alt="[注意]" src="images/note.png" />
                </td>
                <th align="left">注意</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>
        命名規約では、<code class="classname">DescribeNewBowlingGame</code>
        というクラスを NewBowlingGameSpec.php
        という名前のファイルで定義することも許可しています。
        これは、他の BDD フレームワークでもよく使われているものであり、
        他の BDD フレームワークから
        PHPSpec への移植を簡単に行えるようにするためにパクりました。
        コマンドラインで phpspec を実行するときのパラメータは、
        常にファイル名あるいはそこから拡張子 ".php" を省略したものとなります。
        どちらの規約を使用するにしても、一貫してそれを使用するよう注意しましょう。
      </p>
                </td>
              </tr>
            </table>
          </div>
          <pre class="screen">phpspec DescribeNewBowlingGame</pre>
          <p>
      実行は失敗することでしょう。当然です。まだ Bowling
      クラスはどこにも存在しないわけですから。
    </p>
          <p>
      では、このサンプルを成功させるための最小限のコードを書いてみましょう。
    </p>
          <pre class="programlisting">class Bowling
{

    public $score = 0;

    public function hit()
    {     
    }

}</pre>
          <p>
      サンプルをもう一度実行し、成功することを確認してください。
    </p>
          <p>
      以下で説明するように、少しずつ着実に進めていくようにしましょう。
      最初のサンプルの実装を終えたので、新たなコードを書くには
      さらに別のサンプルを用意して「新たなコードがどのように振る舞うのか」
      を示す必要があります。サンプルは、スペックメソッドとして定義します。
      スペックメソッドは "itShould" という名前ではじめなければなりません。
      次の段階として行うのは、おそらく何本かのピンを倒したときの処理でしょう。
      そのときは何らかのスコアが記録されるはずです。
      また、スコアに関するルールを表すサンプルを
      <code class="classname">Bowling::hit()</code> メソッドを用いて書くことになるでしょう。
    </p>
          <p>
      PHPSpec を用いてより複雑な BDD を行う方法については、後ほど説明します。
    </p>
        </div>
        <div class="section" lang="ja" xml:lang="ja">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="take.very.small.steps"></a>2.1.3. 一歩ずつ着実に</h3>
              </div>
            </div>
          </div>
          <p>
      いきなりコードを書き始める必要はありません。
      まずはどのような振る舞いが要求されているのかを考え、
      その振る舞いを表すサンプルスペックを追加し、
      それから初めて実装に進みます。
      そのうちすぐに、この流れが自然に感じられるようになるでしょう。
      さらに、何を満たすべきなのかという仕様 (スペック)
      を把握していることによる安心感が得られるようになります。
    </p>
          <p>
      まず最初に、普通の英語でスペックを書いてみるというのもお勧めです。
      それをもとにして、PHPSpec 用の実行可能なサンプルを書くことができます。
      逆に、近い将来にも PHPSpec のスペックを普通のテキスト形式に変換できるようになるでしょう。
      (BDD フレームワークとしての) PHPSpec が本質的に目指すところは、
      「たとえコードが複雑になったとしても、
      そのスペックは常に明確で読みやすいものである」ということです。
      これは、TDD の目的のひとつである
      「テストそのものがドキュメントとなる」を反映しています。
    </p>
          <p>
      また、必要に応じてコードをリファクタリングすることも忘れないようにしましょう。
      BDD を進めるには、コードを常にきれいにしておくことが大切です。
    </p>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="installing.phpspec.html">前のページ</a> </td>
          <td width="20%" align="center"> </td>
          <td width="40%" align="right"> <a accesskey="n" href="introduction.html">次のページ</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">第1章 PHPSpec のインストール </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">ホーム</a>
          </td>
          <td width="40%" align="right" valign="top"> 第3章 導入</td>
        </tr>
      </table>
    </div>
    <div xmlns="" class="revinfo"></div>
  </body>
</html>
